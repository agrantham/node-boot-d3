/*! node-boot - v0.2.0 - 2013-04-23 */
var n=20,m=200,stack=d3.layout.stack().offset("wiggle"),layers0=stack(d3.range(n).map(function(){return bumpLayer(m)})),layers1=stack(d3.range(n).map(function(){return bumpLayer(m)}));var width=960,height=500;var x=d3.scale.linear().domain([0,m-1]).range([0,width]);var y=d3.scale.linear().domain([0,d3.max(layers0.concat(layers1),function(a){return d3.max(a,function(b){return b.y0+b.y})})]).range([height,0]);var color=d3.scale.linear().range(["#aad","#556"]);var area=d3.svg.area().x(function(a){return x(a.x)}).y0(function(a){return y(a.y0)}).y1(function(a){return y(a.y0+a.y)});var svg=d3.select("#d3_example").append("svg").attr("width",width).attr("height",height);svg.selectAll("path").data(layers0).enter().append("path").attr("d",area).style("fill",function(){return color(Math.random())});function transition(){d3.selectAll("path").data(function(){var a=layers1;layers1=layers0;return layers0=a}).transition().duration(2500).attr("d",area)}function bumpLayer(e){function c(h){var f=1/(0.1+Math.random()),l=2*Math.random()-0.5,k=10/(0.1+Math.random());for(var j=0;j<e;j++){var g=(j/e-l)*k;h[j]+=f*Math.exp(-g*g)}}var b=[],d;for(d=0;d<e;++d){b[d]=0}for(d=0;d<5;++d){c(b)}return b.map(function(f,a){return{x:a,y:Math.max(0,f)}})};